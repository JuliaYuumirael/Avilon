<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>๐งช ะขะตัั ะฑะธะฑะปะธะพัะตะบ</title>
</head>
<body>
<h1>๐งช ะขะตัั ะทะฐะณััะทะบะธ ะฑะธะฑะปะธะพัะตะบ</h1>
<div id="results"></div>

<!-- ะขะตััะธััะตะผ ะะะฌะขะะะะะขะะะซ Cannon.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
    // ะัะพะฑัะตะผ ะฐะปััะตัะฝะฐัะธะฒะฝัะต ัะธะทะธัะตัะบะธะต ะดะฒะธะถะบะธ
    const physicsUrls = [
        {
            name: 'Ammo.js (Bullet Physics)',
            url: 'https://cdnjs.cloudflare.com/ajax/libs/ammo.js/0.0.10/ammo.min.js',
            test: () => typeof Ammo !== 'undefined'
        },
        {
            name: 'Matter.js (2D ัะธะทะธะบะฐ)',
            url: 'https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js',
            test: () => typeof Matter !== 'undefined'
        },
        {
            name: 'Rapier.js (Rust ัะธะทะธะบะฐ)',
            url: 'https://cdn.skypack.dev/@dimforge/rapier3d',
            test: () => typeof RAPIER !== 'undefined'
        },
        {
            name: 'Box2D.js',
            url: 'https://cdnjs.cloudflare.com/ajax/libs/box2d/1.0.2/box2d.min.js',
            test: () => typeof Box2D !== 'undefined'
        },
        {
            name: 'CANNON-ES (ะฝะพะฒัะน Cannon)',
            url: 'https://unpkg.com/cannon-es@0.20.0/dist/cannon-es.min.js',
            test: () => typeof CANNON !== 'undefined'
        }
    ];

    let currentIndex = 0;

    function tryNextPhysics() {
        if (currentIndex >= physicsUrls.length) {
            addResult('๐ ะัะต ัะธะทะธัะตัะบะธะต ะดะฒะธะถะบะธ ะฝะตะดะพัััะฟะฝั!', false);
            addResult('๐ค ะะพะถะตั ะฑััั, ัะดะตะปะฐะตะผ ะบััั ะฑะตะท ัะธะทะธะบะธ?', false);
            return;
        }

        const lib = physicsUrls[currentIndex];
        addResult(`๐ ะัะพะฑัะตะผ ${lib.name}...`);

        const script = document.createElement('script');
        script.src = lib.url;

        script.onload = () => {
            setTimeout(() => {
                if (lib.test()) {
                    addResult(`โ ${lib.name} ะะะะะขะะะข!`);
                    addResult(`๐ ะะะะะ ะะกะะะะฌะะะะะขะฌ: ${lib.url}`);

                    // ะัะพะฑัะตะผ ัะพะทะดะฐัั ัะธะทะธัะตัะบะธะน ะผะธั
                    try {
                        if (lib.name.includes('Matter')) {
                            const engine = Matter.Engine.create();
                            addResult('โ Matter.Engine ัะพะทะดะฐะฝ ััะฟะตัะฝะพ!');
                        } else if (lib.name.includes('CANNON-ES')) {
                            const world = new CANNON.World();
                            addResult('โ CANNON-ES World ัะพะทะดะฐะฝ ััะฟะตัะฝะพ!');
                        }
                    } catch (error) {
                        addResult(`โ ะัะธะฑะบะฐ ัะพะทะดะฐะฝะธั: ${error.message}`, false);
                    }
                } else {
                    addResult(`โ ${lib.name} ะฝะต ะทะฐะณััะทะธะปัั`, false);
                    currentIndex++;
                    setTimeout(() => tryNextPhysics(), 100);
                }
            }, 200);
        };

        script.onerror = () => {
            addResult(`โ ${lib.name} ะฝะตะดะพัััะฟะตะฝ`, false);
            currentIndex++;
            setTimeout(() => tryNextPhysics(), 100);
        };

        document.head.appendChild(script);
    }

    // ะะฐะฟััะบะฐะตะผ ะฟะพะธัะบ ะฐะปััะตัะฝะฐัะธะฒ
    setTimeout(() => tryNextPhysics(), 1000);
</script>

<script>
    const results = document.getElementById('results');

    function addResult(message, isSuccess = true) {
        const div = document.createElement('div');
        div.style.color = isSuccess ? 'green' : 'red';
        div.style.margin = '10px 0';
        div.textContent = message;
        results.appendChild(div);
    }

    // ะัะพะฒะตััะตะผ ะทะฐะณััะทะบั
    setTimeout(() => {
        console.log('THREE type:', typeof THREE);
        console.log('CANNON type:', typeof CANNON);

        if (typeof THREE !== 'undefined') {
            addResult('โ THREE.js ะทะฐะณััะถะตะฝ ััะฟะตัะฝะพ!');
            addResult(`   ะะตััะธั: ${THREE.REVISION}`);
        } else {
            addResult('โ THREE.js ะะ ะทะฐะณััะถะตะฝ!', false);
        }

        if (typeof CANNON !== 'undefined') {
            addResult('โ CANNON.js ะทะฐะณััะถะตะฝ ััะฟะตัะฝะพ!');
            addResult(`   ะะตััะธั: ${CANNON.version || 'ะฝะตะธะทะฒะตััะฝะฐ'}`);
        } else {
            addResult('โ CANNON.js ะะ ะทะฐะณััะถะตะฝ!', false);
        }

        // ะขะตััะธััะตะผ ัะพะทะดะฐะฝะธะต ะพะฑัะตะบัะพะฒ
        try {
            if (typeof THREE !== 'undefined') {
                const scene = new THREE.Scene();
                addResult('โ THREE.Scene ัะพะทะดะฐะฝะฐ ััะฟะตัะฝะพ!');
            }

            if (typeof CANNON !== 'undefined') {
                const world = new CANNON.World();
                addResult('โ CANNON.World ัะพะทะดะฐะฝ ััะฟะตัะฝะพ!');
            }
        } catch (error) {
            addResult(`โ ะัะธะฑะบะฐ ัะพะทะดะฐะฝะธั ะพะฑัะตะบัะพะฒ: ${error.message}`, false);
        }

    }, 1000);

    // ะะฑัะฐะฑะพััะธะบ ะพัะธะฑะพะบ
    window.addEventListener('error', (e) => {
        addResult(`โ ะัะธะฑะบะฐ ะทะฐะณััะทะบะธ: ${e.message}`, false);
        console.error('Loading error:', e);
    });

    document.addEventListener('DOMContentLoaded', () => {
        addResult('๐ DOM ะทะฐะณััะถะตะฝ');
    });
</script>
</body>
</html>